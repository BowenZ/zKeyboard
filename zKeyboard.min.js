window.zKeyboard=function(){$self={};$self.touchEvent=function(){var e,t,o,n,l;if(window.navigator.pointerEnabled){e="pointerdown";t="pointerout";o="pointermove";n="pointerover";l="pointerup"}else if(window.navigator.msPointerEnabled){e="MSPointerDown";t="MSPointerOut";o="MSPointerMove";n="MSPointerOver";l="MSPointerUp"}else if("ontouchend"in window){e="touchstart";t="touchleave ";o="touchmove";n="touchstart";l="touchend touchcancel"}else{e="mousedown";t="mouseout";o="mousemove";n="mouseover";l="mouseup"}return{start:e,leave:t,move:o,enter:n,end:l}}();$self.defultConfig={container:".zkey-container",input:".zkey-input",maxlength:6,row:4,col:3,leftBottomText:"确定",rightBottomText:"退格",leftBottomCallback:null,rightBottomCallback:function(){var e=$($self.defultConfig.input);e.val(function(){var t=e.val();t=t.substr(0,t.length-1);return t}())}};$self.init=function(e){if($($self.defultConfig.container).children().length>0){throw $self.defultConfig.container+"is not empty!";return}$.extend(true,$self.defultConfig,e);var t=$($self.defultConfig.input);var o=$('<table class="zkeys" cellspacing="0"></table>');for(var n=0;n<$self.defultConfig.row;n++){var l=$("<tr></tr>");for(var i=1;i<=$self.defultConfig.col;i++){var f=$('<td class="zkey"></td>'),r=n*3+i;if(r==10)r=$self.defultConfig.leftBottomText;else if(r==11)r=0;else if(r==12)r=$self.defultConfig.rightBottomText;f.data("value",r).text(r);l.append(f)}o.append(l)}$($self.defultConfig.container).append(o);$($self.defultConfig.container).on($self.touchEvent.start,".zkey",function(){$(this).addClass("active")}).on($self.touchEvent.end,".zkey",function(){$(this).removeClass("active");if($(this).data("value")==$self.defultConfig.leftBottomText){$self.defultConfig.leftBottomCallback&&$self.defultConfig.leftBottomCallback()}else if($(this).data("value")==$self.defultConfig.rightBottomText){$self.defultConfig.rightBottomCallback&&$self.defultConfig.rightBottomCallback()}else{if(t.val().length>=$self.defultConfig.maxlength)return;t.val(t.val()+$(this).data("value"))}}).on($self.touchEvent.move,".zkey",function(e){e.preventDefault()});var a=".zkey-container{position:fixed;width:100%;bottom:0}.zkeys{-webkit-user-select:none;list-style:none;width:100%;border-right:1px solid #7f8c8d;border-bottom:1px solid #7f8c8d}.zkey{background-color:#ecf0f1;line-height:4rem;text-align:center;color:#34495e;width:33.33%;border-top:1px solid #7f8c8d;border-left:1px solid #7f8c8d}.zkey.active{background-color:#1abc9c}";var s=$("<style></style>").text(a);$("head").append(s)};return $self}();